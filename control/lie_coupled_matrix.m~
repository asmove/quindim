function lie_coupled_matrix(f, G, h, x)
    [deltas, ~] = nreldegs(f, G, y, x);
    p = length(h);
    [~, m] = size(G);
    
    if(p ~= m)
       error('Number of inputs MUST be equal to outputs!'); 
    end
    
    for i = 1:p
        delta_i = deltas(i);
        
        j = 0;
        hi = y(i);
        
        % i-th Lie derivative for h respective to f
        lie_i_f_hi = hi;
        
        for j 
            lie_j_f_hi = hi;
            for j = 1:delta_i-1
                lie_j_f_hi = lie_diff(f, lie_j_f_hi, x);
            end

            gi = G(:, i);
            lie_j_f_hi = lie_diff(f, lie_j_f_hi, x);
    end
end